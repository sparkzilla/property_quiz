PROPERTY QUIZ

Q1. Where are we instantiating instances of the Property class?

In properties.rb (root directory)

Q2. Where are we defining the SQL that enables us to save the ruby Property object into the database?

In properties.sql (in the sql directory)

Q3. In console.rb, which lines modify the database?

Property.delete_all()

property1.save()

Q4. Why do we not define the id of a Property object at the point we instantiate it (‘new it up’)?

Because it doesn't have an id until it is saved in the db.

Q5. Where and how do we assign the id (that is generated by the database) to the ruby Property object?

There are three steps:

1. Create the @id instance variable, converted to an integer
2. RETURN the id form the database during the INSERT command
3. Assign the @id instance variable to the first position of the array of hashes that is returned

Q6. Why do we put a guard (an if clause) on the @id attribute in the constructor?

To make sure that an instance variable is onluy assigned if an id exists in the db

Q7. Why are some of the CRUD actions represented by instance methods, and others by class methods?

Class methods, such as Property.delete_all(), act on all records. Instance mehods act on single or multiple records.

Q8. What type of data structure is returned by calls to db.exec_prepared()? In the save method, how do we access the id from the returned data structure?

The data is returned as an array of hashes. The RETURN command is used to retreive the id.

Q9. Why do we use prepared statements when performing database operations?

To sanitize the inputs to avoid sql injection attacks and some oither reasons.

Extension Questions
Look at the find_by_id and find_by_address methods in the Property class.

Q10. What do they take in as their arguments?

id, address

Q11. What are their return values?

   p result      <- the postrgess db object
   p result[0]   <- the first item in the pg array, which is a hash of the object
   p result[0]['address'] . <- find the value of the address key in the hash
